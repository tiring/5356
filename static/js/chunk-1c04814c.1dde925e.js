(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c04814c"],{"1af6":function(t,e,a){var i=a("63b6");i(i.S,"Array",{isArray:a("9003")})},"1d13":function(t,e,a){},"30e9":function(t,e,a){"use strict";var i=a("71f0"),o=a.n(i);o.a},"3fbd":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_box"},[a("p",{staticClass:"form_title"},[t._v("审批信息")]),t._v(" "),a("div",{staticClass:"form_content",staticStyle:{"box-sizing":"border-box"}},[t._m(0),t._v(" "),a("div",{staticClass:"form_list"},t._l(t.formData,(function(e,i){return a("div",{key:i},[e.helperHistoryList?t._l(e.helperHistoryList,(function(o,s){return a("div",{key:s+"A",staticClass:"list clearfix"},[a("div",{staticClass:"title"},[a("span",[t._v(t._s(i+1)+"级会审")])]),t._v(" "),a("div",{staticClass:"fl",staticStyle:{width:"40%"}},[a("el-input",{staticStyle:{"padding-bottom":"10px"},attrs:{disabled:"",size:"small"},model:{value:o.auditUser.name,callback:function(e){t.$set(o.auditUser,"name",e)},expression:"v.auditUser.name"}}),t._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"date",disabled:""},model:{value:e.auditUser.updated,callback:function(a){t.$set(e.auditUser,"updated",a)},expression:"item.auditUser.updated"}})],1),t._v(" "),a("div",{staticClass:"fl",staticStyle:{width:"calc(60% - 10px)","margin-left":"10px"}},[a("el-input",{attrs:{resize:"none",type:"textarea",size:"small"},model:{value:o.opinion,callback:function(e){t.$set(o,"opinion",e)},expression:"v.opinion"}})],1)])})):t._e(),t._v(" "),a("div",{staticClass:"list clearfix",staticStyle:{"padding-bottom":"10px"}},[a("div",{staticClass:"title"},[a("span",[t._v(t._s(i+1)+"级审批")])]),t._v(" "),a("div",{staticClass:"fl",staticStyle:{width:"40%"}},[a("el-input",{staticStyle:{"padding-bottom":"10px"},attrs:{disabled:"",size:"small"},model:{value:e.auditUser.name,callback:function(a){t.$set(e.auditUser,"name",a)},expression:"item.auditUser.name"}}),t._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",type:"date",disabled:"",size:"small"},model:{value:e.updated,callback:function(a){t.$set(e,"updated",a)},expression:"item.updated"}})],1),t._v(" "),a("div",{staticClass:"fl",staticStyle:{width:"calc(60% - 10px)","margin-left":"10px"}},[a("el-input",{attrs:{disabled:0!=e.isAudit||e.auditUserId!=t.userId||t.isDisabled,resize:"none",type:"textarea",size:"small"},on:{input:t.changeInput},model:{value:e.opinion,callback:function(a){t.$set(e,"opinion",a)},expression:"item.opinion"}})],1)])],2)})),0)]),t._v(" "),t.isShowDialog?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog},on:{saveData:t.saveData,changeDiagdialogShow:t.getDiagdialogShow},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("添加会审")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"会审人员"}},[a("AddJointForm")],1)])]},proxy:!0}],null,!1,372330189)}):t._e()],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_top"},[a("span",{staticClass:"audit_time"},[t._v("审批人与时间")]),t._v(" "),a("span",{staticClass:"audit_content"},[t._v("征集审批意见")])])}],s=a("d921"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_box"},[a("p",{staticClass:"form_title"},[t._v("会审人员")]),t._v(" "),a("div",{staticClass:"form_content"},[a("el-form",{ref:"form",attrs:{size:"small",model:t.formData,"label-width":"0"}},t._l(t.formData.data,(function(e,i){return a("div",{key:i,staticClass:"clearfix box"},[a("div",{staticClass:"title fl"},[t._v("添加会审")]),t._v(" "),a("div",{staticClass:"w33 fl"},[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.changeSelect(e,i)}},model:{value:t.formData.data[i].departmentId,callback:function(e){t.$set(t.formData.data[i],"departmentId",e)},expression:"formData.data[index].departmentId"}},t._l(t.departmentList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),a("div",{staticClass:"w33 fl",staticStyle:{padding:"0 10px"}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.changeSelect(e,i)}},model:{value:t.formData.data[i].professionId,callback:function(e){t.$set(t.formData.data[i],"professionId",e)},expression:"formData.data[index].professionId"}},t._l(t.positionList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),a("div",{class:["fl",1==t.formData.data.length?"w33":"w23"]},[a("el-form-item",{attrs:{prop:"data."+i+".userId",rules:{required:!0,message:"会审人不能为空",trigger:"change"}}},[a("el-select",{attrs:{placeholder:"请选择"},on:{"visible-change":function(e){return t.visibleChange(e,i)}},model:{value:t.formData.data[i].userId,callback:function(e){t.$set(t.formData.data[i],"userId",e)},expression:"formData.data[index].userId"}},t._l(t.userList[i],(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),t.formData.data.length>1?a("div",{class:["fl","text_center",1==t.formData.data.length?"w0":"w10"]},[a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.deleteLine(i)}}})],1):t._e()])})),0),t._v(" "),a("div",{staticClass:"text_center"},[a("el-button",{staticClass:"w50",attrs:{size:"small"},on:{click:t.addLine}},[t._v("添加一行")])],1)],1)])},l=[],r=a("8593"),u=a("4431"),c={data:function(){return{formData:{data:[{departmentId:"",professionId:"",userId:""}]},departmentList:[],positionList:[],userList:[]}},watch:{formData:{handler:function(t){var e=[];this.formData.data.map((function(t){e.push(t.userId)})),this.$emit("getFormData",e)},deep:!0}},created:function(){this.fatchData()},methods:{getRulesData:function(){var t=!1;return this.$refs.form.validate((function(e){t=e})),{msg:t?"表单验证通过":"请检查输入的表单是否有误",data:t}},resetRules:function(){this.$refs.form.resetFields()},deleteLine:function(t){this.$delete(this.formData.data,t),this.$delete(this.userList,t)},addLine:function(){this.formData.data.push({departmentId:"",professionId:"",userId:""})},changeSelect:function(t,e){this.$set(this.userList,e,[]),this.formData.data[e].userId=""},visibleChange:function(t,e){var a=this;console.log(t),t&&(console.log(e),""==this.formData.data[e].departmentId||""==this.formData.data[e].professionId?this.$message({type:"error",message:"当前行的部门或者职位不能为空"}):Object(r["w"])({departmentId:this.formData.data[e].departmentId,professionId:this.formData.data[e].professionId}).then((function(t){a.$set(a.userList,e,t.data),console.log(a.userList)})))},fatchData:function(){var t=this;Object(r["z"])().then((function(e){t.departmentList=e.data})),Object(u["Jb"])({optionType:10,isUse:1}).then((function(e){t.positionList=e.data.optionInfoItemList}))},getUserList:function(t){Object(r["w"])(t).then((function(t){}))}}},d=c,f=(a("d168"),a("2877")),h=Object(f["a"])(d,n,l,!1,null,"0679f5c0",null),g=h.exports,m=a("5308"),D={components:{PropBox:s["a"],AddJointForm:g},props:{sentFormData:{type:Array},isDisabled:{type:Boolean,default:!0}},data:function(){return{userId:"",formData:[],isShowDialog:!1}},created:function(){this.userId=JSON.parse(Object(m["a"])("YUANZHIHUI")).id},watch:{sentFormData:{handler:function(t){var e=this;this.formData=JSON.parse(JSON.stringify(t)),this.formData.map((function(t){0==t.isAudit&&(e.isDisabled?(t.opinion="该用户还未审批",t.updated=""):e.userId!=t.auditUserId?(t.opinion="还未到该用户审批",t.updated=""):e.userId==t.auditUserId&&(t.opinion="",t.updated=""))}))},deep:!0}},methods:{changeInput:function(t){this.$emit("getFormData",t)},saveData:function(){},addJoint:function(){this.isShowDialog=!0},getDiagdialogShow:function(){this.isShowDialog=!1}}},b=D,p=(a("afc9"),Object(f["a"])(b,i,o,!1,null,"17f195ff",null));e["a"]=p.exports},"4ad0":function(t,e,a){},"549b":function(t,e,a){"use strict";var i=a("d864"),o=a("63b6"),s=a("241e"),n=a("b0dc"),l=a("3702"),r=a("b447"),u=a("20fd"),c=a("7cd6");o(o.S+o.F*!a("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,a,o,d,f=s(t),h="function"==typeof this?this:Array,g=arguments.length,m=g>1?arguments[1]:void 0,D=void 0!==m,b=0,p=c(f);if(D&&(m=i(m,g>2?arguments[2]:void 0,2)),void 0==p||h==Array&&l(p))for(e=r(f.length),a=new h(e);e>b;b++)u(a,b,D?m(f[b],b):f[b]);else for(d=p.call(f),a=new h;!(o=d.next()).done;b++)u(a,b,D?n(d,m,[o.value,b],!0):o.value);return a.length=b,a}})},"54a1":function(t,e,a){a("6c1c"),a("1654"),t.exports=a("95d5")},"71f0":function(t,e,a){},"75fc":function(t,e,a){"use strict";var i=a("a745"),o=a.n(i);function s(t){if(o()(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}var n=a("774e"),l=a.n(n),r=a("c8bb"),u=a.n(r);function c(t){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return l()(t)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(t){return s(t)||c(t)||d()}a.d(e,"a",(function(){return f}))},"774e":function(t,e,a){t.exports=a("d2d5")},"95d5":function(t,e,a){var i=a("40c3"),o=a("5168")("iterator"),s=a("481b");t.exports=a("584a").isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||s.hasOwnProperty(i(e))}},a745:function(t,e,a){t.exports=a("f410")},afc9:function(t,e,a){"use strict";var i=a("4ad0"),o=a.n(i);o.a},c8bb:function(t,e,a){t.exports=a("54a1")},d168:function(t,e,a){"use strict";var i=a("1d13"),o=a.n(i);o.a},d2d5:function(t,e,a){a("1654"),a("549b"),t.exports=a("584a").Array.from},f410:function(t,e,a){a("1af6"),t.exports=a("584a").Array.isArray},f462:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"audit_record"},[t.isShowAuditRecordTimeButton?a("ConditionShow",{attrs:{sentconditiondatas:t.getAuditRecordTimeButtons},on:{changecondition:t.getTimeData}}):t._e(),t._v(" "),t.isShowAuditRecordSearch?a("SearchCondition",{attrs:{sentAttconditiondatas:t.getAuditRecordSearchField},on:{changeAttcondition:t.getSearchDatas}}):t._e(),t._v(" "),a("div",{staticClass:"divBox"},[a("div",{staticStyle:{padding:"10px 0"}},[a("TableTopButton",{attrs:{sentBatchOperationDatas:t.batchOperationDatas},on:{changeChildDailogShow:t.getChildDailogShow}})],1),t._v(" "),t.isShowTableField&&t.isShowTableList?a("TableList",{attrs:{sentTableFields:t.getTableField,sentTableData:t.filterTableList},on:{changePagination:t.getChildPagination,changeChildDailogShow:t.getChildDailogShow,getTableID:t.getTableChildID}}):t._e()],1),t._v(" "),a("article",[t.isShowDialog["0"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["0"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},"0"==t.timeData.isCurrentAudit?{key:"confirm",fn:function(){return[t._v("导出审批单")]},proxy:!0}:null,"1"==t.timeData.isCurrentAudit?{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0}:null],null,!0)}):t._e(),t._v(" "),t.isShowDialog["1"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["1"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e(),t._v(" "),t.isShowDialog["2"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["2"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e(),t._v(" "),t.isShowDialog["3"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["3"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e(),t._v(" "),t.isShowDialog["4"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["4"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e(),t._v(" "),t.isShowDialog["5"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["5"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e(),t._v(" "),t.isShowDialog["6"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["6"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e(),t._v(" "),t.isShowDialog["7"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["7"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},"1"==t.timeData.isCurrentAudit?{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}:null,{key:"customButton",fn:function(){return["1"==t.timeData.isCurrentAudit?a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")]):"0"==t.timeData.isCurrentAudit?a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("导出审批单")]):t._e()]},proxy:!0}],null,!0)}):t._e(),t._v(" "),t.isShowDialog["8"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["8"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e(),t._v(" "),t.isShowDialog["9"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["9"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e(),t._v(" "),t.isShowDialog["10"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["10"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e(),t._v(" "),t.isShowDialog["11"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["11"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e(),t._v(" "),t.isShowDialog["12"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["12"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e(),t._v(" "),t.isShowDialog["13"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["13"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e(),t._v(" "),t.isShowDialog["14"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["14"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e(),t._v(" "),t.isShowDialog["15"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["15"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e(),t._v(" "),t.isShowDialog["16"]?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog["16"]},on:{changeDiagdialogShow:t.getDiagdialogShow,saveData:t.submitAudit},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批信息")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批信息"}},[a("AuditMessageForm",{attrs:{isDisabled:t.isDisabled,sentFormData:t.tableRowData.flowAndItemHistoryList},on:{getFormData:t.getFormData}})],1)])]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:t.setRejects}},[t._v("驳回")])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("通过")]},proxy:!0}],null,!1,1364113173)}):t._e()],1)],1)},o=[],s=a("db72"),n=(a("7f7f"),a("75fc")),l=a("f972"),r=a("3897"),u=a("86f5"),c=a("3fbd"),d=a("80fb"),f=a("d921"),h=a("8593"),g={components:{SearchCondition:l["a"],ConditionShow:r["a"],TableList:u["a"],AuditMessageForm:c["a"],TableTopButton:d["a"],PropBox:f["a"]},data:function(){return{isDisabled:!1,isShowAuditRecordTimeButton:!0,auditRecordTimeButton:{0:["0","今天"],1:["1","昨天"],2:["2","本周"],3:["3","上周"],4:["4","本月"],5:["5","上月"],createdEnd:["createdEnd","结束时间"],leadRegistrationTime:["leadRegistrationTime","登记时间"],createdSta:["createdSta","起始时间"]},isShowAuditRecordButton:!0,auditRecordButton:{0:["0","全部"],1:["1","待审批"],isCurrentAudit:["isCurrentAudit","我的审批"]},isShowAuditRecordSearch:!1,auditRecordSearch:{},isShowTableField:!1,isShowTableList:!1,tableField:{},tableList:{},timeData:{},searchData:{},paginationData:{},batchOperationDatas:{left:[{name:"批量审批",eventName:"onAudit"}],right:[{name:"原表格导出",eventName:"onExport"}]},auditCode:{0:"驳回",1:"通过",2:"审批中",3:"已取消"},completeCode:{0:"未完成",1:"已完成"},dialogShow:{0:!1,1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1,9:!1,10:!1,11:!1,12:!1,13:!1,14:!1,15:!1,16:!1},isShowDialog:{},getChildDailogShowVal:"",tableRowId:"",tableRowData:{},tableDialogType:"",auditMessage:""}},computed:{getAuditRecordSearchField:function(){var t,e=this.auditRecordSearch;return t=[{type:"text",labelName:"查询属性",key:"queryAttr"},{type:"text",labelName:e.itemName[1],key:e.itemName[0]},{type:"select",labelName:e.flowType[1],key:e.flowType[0],data:"server",items:{optionType:300}},{type:"select",labelName:e.isComplete[1],key:e.isComplete[0],data:"constValue",items:[{name:"未完成",key:"0"},{name:"完成",key:"1"}]}],"0"==this.timeData.isCurrentAudit&&this.$set(t,4,{type:"select",labelName:e.status[1],key:e.status[0],data:"constValue",items:[{name:"审批中",key:"2"},{name:"通过",key:"0"},{name:"驳回",key:"1"},{name:"已取消",key:"3"}]}),console.log(JSON.stringify(t),78963),t},getAuditRecordTimeButtons:function(){var t,e,a=this.auditRecordButton,i=this.auditRecordTimeButton,o=[];return this.isShowAuditRecordButton&&(t={title:a.isCurrentAudit[1],fieldName:a.isCurrentAudit[0],dataType:"button",showed:!0,iconDef:!0,iconShow:!0,items:[{name:a[1][1],fieldName:a[1][0],active:!0,num:0,id:"1-1"},{name:a[0][1],fieldName:a[0][0],active:!1,num:0,id:"1-2"}]},o.push(t)),this.isShowAuditRecordTimeButton&&(e={title:i.leadRegistrationTime[1],fieldName:i.leadRegistrationTime[0],dataType:"regdate",createdSta:i.createdSta[0],createdEnd:i.createdEnd[0],showed:!0,iconDef:!1,iconShow:!1,dataPicker:!0,items:[{name:i[0][1],fieldName:i[0][0],active:!0,num:0,id:"2-1"},{name:i[1][1],fieldName:i[1][0],active:!1,num:0,id:"2-2"},{name:i[2][1],fieldName:i[2][0],active:!1,num:0,id:"2-3"},{name:i[3][1],fieldName:i[3][0],active:!1,num:0,id:"2-4"},{name:i[4][1],fieldName:i[4][0],active:!1,num:0,id:"2-5"},{name:i[5][1],fieldName:i[5][0],active:!1,num:0,id:"2-6"}]},o.push(e)),o},getTableField:function(){var t={data:[],button:[]},e=this.tableField;return this.isShowTableField&&(this.$set(t.data,0,[].concat(Object(n["a"])(e.itemName),["100","center",{eventName:"onName"}])),this.$set(t.data,1,[].concat(Object(n["a"])(e.flow),["100","center"])),this.$set(t.data,2,[].concat(Object(n["a"])(e.status),["100","center"])),this.$set(t.data,3,[].concat(Object(n["a"])(e.isComplete),["100","center"]))),"1"==this.timeData.isCurrentAudit?t.button.push({name:"审批",eventName:"onAudit"}):"0"==this.timeData.isCurrentAudit&&t.button.push({name:"导出审批单",eventName:"onExprot"}),t},filterTableList:function(){var t=this,e=this.tableList;return e.content.map((function(e){e.flow&&(e.flow=e.flow.name),e.status=t.auditCode[e.status],e.isComplete=t.completeCode[e.isComplete]})),e},getSearchData:function(){var t=Object(s["a"])({page:0,size:10},this.timeData,{},this.searchData);return t},allSearchData:function(){var t=Object(s["a"])({page:0,size:10},this.timeData,{},this.searchData,{},this.paginationData);return t}},watch:{tableDialogType:{handler:function(){switch("1"==this.timeData.isCurrentAudit?this.isDisabled=!1:this.isDisabled=!0,this.tableDialogType){case"0":this.isShowDialog["0"]=!0;break;case"1":this.isShowDialog["1"]=!0;break;case"2":this.isShowDialog["2"]=!0;break;case"3":this.isShowDialog["3"]=!0;break;case"4":this.isShowDialog["4"]=!0;break;case"5":this.isShowDialog["5"]=!0;break;case"6":this.isShowDialog["6"]=!0;break;case"7":this.isShowDialog["7"]=!0;break;case"8":this.isShowDialog["8"]=!0;break;case"9":this.isShowDialog["9"]=!0;break;case"10":this.isShowDialog["10"]=!0;break;case"11":this.isShowDialog["11"]=!0;break;case"12":this.isShowDialog["12"]=!0;break;case"13":this.isShowDialog["13"]=!0;break;case"14":this.isShowDialog["14"]=!0;break;case"15":this.isShowDialog["15"]=!0;break;case"16":this.isShowDialog["16"]=!0;break;default:this.isShowDialog["0"]=!1,this.isShowDialog["1"]=!1,this.isShowDialog["2"]=!1,this.isShowDialog["3"]=!1,this.isShowDialog["4"]=!1,this.isShowDialog["5"]=!1,this.isShowDialog["6"]=!1,this.isShowDialog["7"]=!1,this.isShowDialog["8"]=!1,this.isShowDialog["9"]=!1,this.isShowDialog["10"]=!1,this.isShowDialog["11"]=!1,this.isShowDialog["12"]=!1,this.isShowDialog["13"]=!1,this.isShowDialog["14"]=!1,this.isShowDialog["15"]=!1,this.isShowDialog["16"]=!1,this.tableRowId="",this.tableRowData=[],this.getChildDailogShowVal=""}},immediate:!0}},created:function(){this.fatchData(),this.isShowDialog=JSON.parse(JSON.stringify(this.dialogShow))},methods:{setAudit:function(t){var e=this;Object(h["ib"])(t).then((function(t){console.log(t),e.init(e.allSearchData),e.$message({type:"success",message:t.msg}),e.getChildDailogShowVal="",e.tableDialogType=""}))},setRejects:function(){this.setAudit({isPass:"0",flowAndItemId:this.tableRowId,opinion:this.auditMessage})},submitAudit:function(){"1"==this.timeData.isCurrentAudit?this.setAudit({isPass:"1",flowAndItemId:this.tableRowId,opinion:this.auditMessage}):"0"==this.timeData.isCurrentAudit&&console.log("导出审批单")},getFormData:function(t){this.auditMessage=t},getDiagdialogShow:function(){this.getChildDailogShowVal="",this.tableDialogType=""},getTableChildID:function(t,e){this.tableRowId=t,this.tableDialogType=e.flow},getAuditData:function(){var t=this;Object(h["g"])(this.tableRowId).then((function(e){var a=e.data;t.tableRowData=a}))},getChildDailogShow:function(t){if(this.getChildDailogShowVal=t,"onName"==this.getChildDailogShowVal||"onAudit"==this.getChildDailogShowVal){switch(this.tableDialogType){case"征集线索":this.tableDialogType="0";break;case"出库申请":case"出库申请-借出":case"出库申请-提用":case"出库申请-观摩":case"出库申请-全部":this.tableDialogType="1";break;case"出库确认":this.tableDialogType="2";break;case"归库确认":this.tableDialogType="3";break;case"消毒任务":this.tableDialogType="4";break;case"事故登记":this.tableDialogType="5";break;case"修复登记":this.tableDialogType="6";break;case"盘点任务":this.tableDialogType="7";break;case"征集登记":this.tableDialogType="8";break;case"通知公告":this.tableDialogType="9";break;case"入馆申请":this.tableDialogType="10";break;case"入馆登记":this.tableDialogType="11";break;case"鉴定申请":this.tableDialogType="12";break;case"登记拨库":this.tableDialogType="13";break;case"藏品编目":this.tableDialogType="14";break;case"正式账目":this.tableDialogType="15";break;case"注销账目":this.tableDialogType="16";break}this.getAuditData()}},getChildPagination:function(t){this.paginationData=t,this.init(this.allSearchData)},getTimeData:function(t){this.timeData=t,this.init(this.getSearchData)},getSearchDatas:function(t){this.searchData=t,this.init(this.getSearchData)},fatchData:function(){var t=this;Object(h["h"])().then((function(e){t.auditRecordSearch=e.data,t.isShowAuditRecordSearch=!0})),Object(h["i"])().then((function(e){t.isShowTableField=!0,t.tableField=e.data}))},init:function(t){var e=this;Object(h["D"])(t).then((function(t){e.isShowTableList=!0,e.tableList=t.data}))}}},m=g,D=(a("30e9"),a("2877")),b=Object(D["a"])(m,i,o,!1,null,"470329ec",null);e["default"]=b.exports}}]);