(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-609ea5a6"],{2070:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"audit_setting"},[a("conditionShow",{attrs:{sentconditiondatas:t.buttonList},on:{changecondition:t.getButtonData}}),t._v(" "),a("keep-alive",["审批设置"==t.pageName?a("auditSetting"):t._e()],1),t._v(" "),a("keep-alive",["代批设置"==t.pageName?a("replaceAudit"):t._e()],1)],1)},n=[],s=a("e3b6"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[t.isShowAuditSettingSearch?a("SearchCondition",{key:"auditSetting",attrs:{sentAttconditiondatas:t.getAuditSettingDatas},on:{changeAttcondition:t.getChildCondition}}):t._e(),t._v(" "),a("div",{staticClass:"divBox"},[a("div",{staticStyle:{padding:"10px 0"}}),t._v(" "),t.isShowTableField&&t.isShowTableList?a("TableList",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"tableList",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",sentTableFields:t.getTableFields,sentTableData:t.filterTableList},on:{changePagination:t.getChildPagination,getTableID:t.getTableChildID,changeChildDailogShow:t.getChildDailogShow}}):t._e()],1),t._v(" "),a("article",[t.isShowDialog.onChangeAudit?a("PropBox",{attrs:{sentdialogVisible:t.isShowDialog.onChangeAudit},on:{saveData:t.updateDatas,changeDiagdialogShow:t.getDiagdialogShow},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("审批设置")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"审批设置"}},[t.isShowDialog.onChangeAudit?a("AuditForm",{ref:"form",attrs:{sentFormData:t.formData},on:{getFormData:t.getFormData}}):t._e()],1)])]},proxy:!0},{key:"confirm",fn:function(){return[t._v("保存")]},proxy:!0}],null,!1,2623912061)}):t._e()],1)],1)},l=[],d=a("db72"),r=(a("7f7f"),a("f972")),c=a("86f5"),h=a("d921"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isShowFormField?a("div",{staticClass:"form_box"},[a("p",{staticClass:"form_title"},[t._v("审批设置")]),t._v(" "),a("div",{staticClass:"form_content"},[a("el-form",{ref:"form",attrs:{size:"small",model:t.formData,"label-width":"100px"}},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"fl w100"},[a("el-form-item",{attrs:{prop:"name",label:"审批关卡"}},[a("el-select",{attrs:{disabled:"",placeholder:"请选择"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},t._l(t.auditSelect,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),a("div",{staticClass:"fl w100"},[a("el-form-item",{attrs:{prop:t.formField.memo[0],label:t.formField.memo[1]}},[a("el-input",{model:{value:t.formData.memo,callback:function(e){t.$set(t.formData,"memo",e)},expression:"formData.memo"}})],1)],1),t._v(" "),t._l(t.formData.nodeList,(function(e,i){return a("div",{key:i+"A",staticClass:"fl w100 line"},[a("div",{staticClass:"fl w33"},[a("el-form-item",{attrs:{label:i+1+"级审批"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.changeDepSelect(e,i)}},model:{value:t.departmentIds[i],callback:function(e){t.$set(t.departmentIds,i,e)},expression:"departmentIds[index]"}},t._l(t.departmentList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),a("div",{staticClass:"fl w33"},[a("el-form-item",{attrs:{"label-width":"20px"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.changeDepSelect(e,i)}},model:{value:t.positionIds[i],callback:function(e){t.$set(t.positionIds,i,e)},expression:"positionIds[index]"}},t._l(t.positionList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),a("div",{class:["fl",t.formData.nodeList.length>1?"w23":"w33"]},[a("el-form-item",{attrs:{"label-width":"20px",rules:{required:!0,message:"审批人不能为空",trigger:"blur"},prop:"nodeList."+i+".userInfoId"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{"visible-change":function(e){return t.visibleChange(e,i)}},model:{value:t.formData.nodeList[i].userInfoId,callback:function(e){t.$set(t.formData.nodeList[i],"userInfoId",e)},expression:"formData.nodeList[index].userInfoId"}},t._l(t.userInfoList[i],(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),t.formData.nodeList.length>1?a("div",{staticClass:"fl w10 text_center"},[a("el-form-item",{attrs:{"label-width":"0px"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.delateLine(i)}}})],1)],1):t._e()])})),t._v(" "),a("div",{staticClass:"fl w100 text_center"},[a("el-form-item",[a("el-button",{staticClass:"w50",attrs:{size:"small"},on:{click:t.addLine}},[t._v("添加一行")])],1)],1),t._v(" "),a("div",{staticClass:"fl w100"},[a("el-form-item",{attrs:{rules:{required:!0,message:"是否启用不能为空",trigger:"blur"},prop:t.formField.isUse[0],label:t.formField.isUse[1]}},t._l(t.isUseList,(function(e){return a("el-radio",{key:e.id,attrs:{label:e.id},model:{value:t.formData.isUse,callback:function(e){t.$set(t.formData,"isUse",e)},expression:"formData.isUse"}},[t._v(t._s(e.name))])})),1)],1)],2)])],1)]):t._e()},f=[],m=(a("ac6a"),a("456d"),a("4431")),g=a("8593"),p={props:{sentFormData:{type:Object}},data:function(){return{auditSelect:[],isShowFormField:!1,formField:{},name:"",departmentList:[],positionList:[],departmentIds:[],positionIds:[],userInfoList:[],formData:{memo:"",isUse:"0",nodeList:[]},copyFormData:{memo:"",isUse:"1",nodeList:[]},isUseList:[{id:"0",name:"暂停"},{id:"1",name:"启用"}]}},created:function(){this.departmentIds=[],this.positionIds=[],this.fatchData(),this.formData=JSON.parse(JSON.stringify(this.copyFormData))},beforeDestroy:function(){},watch:{sentFormData:{handler:function(t){var e=this;Object.keys(t).length>0?(this.name=t.id,this.formData.memo=t.memo,this.formData.isUse=String(t.isUse),t.flowNodeList.map((function(t,a){console.log(t[a]),e.departmentIds[a]=t.userInfo.department.id,e.positionIds[a]=t.userInfo.profession.id,Object(g["w"])({departmentId:e.departmentIds[a],professionId:e.positionIds[a]}).then((function(t){e.$set(e.userInfoList,a,t.data)})),e.formData.nodeList.push({userInfoId:t.userInfo.id})}))):(console.log("空对象"),this.formData=this.copyFormData)},deep:!0},formData:{handler:function(t){this.$emit("getFormData",t)},deep:!0}},methods:{getRulesData:function(){var t=!1;return this.$refs.form.validate((function(e){t=e})),{msg:t?"表单验证通过":"请检查输入的表单是否有误",data:t}},resetRules:function(){this.$refs.form.resetFields()},changeDepSelect:function(t,e){this.formData.nodeList[e].userInfoId="",this.userInfoList[e]=[]},visibleChange:function(t,e){var a=this;t&&(this.departmentIds[e]&&this.positionIds[e]?Object(g["w"])({departmentId:this.departmentIds[e],professionId:this.positionIds[e]}).then((function(t){0==t.data.length?a.$message({type:"info",message:"该部门职位下没有用户"}):a.$set(a.userInfoList,e,t.data)})):this.$message({type:"info",message:"请先选择部门和职位"}))},delateLine:function(t){this.formData.nodeList.splice(t,1),this.departmentIds.splice(t,1),this.positionIds.splice(t,1),this.userInfoList.splice(t,1)},addLine:function(){this.formData.nodeList.push({userInfoId:""})},fatchData:function(){var t=this;Object(g["n"])().then((function(e){t.auditSelect=e.data})),Object(g["l"])().then((function(e){t.formField=e.data,t.isShowFormField=!0})),Object(g["z"])().then((function(e){t.departmentList=e.data})),Object(m["Jb"])({optionType:10,isUse:1}).then((function(e){t.positionList=e.data.optionInfoItemList}))}}},b=p,S=(a("92cb"),a("2877")),D=Object(S["a"])(b,u,f,!1,null,"fa511b68",null),v=D.exports,w={components:{SearchCondition:r["a"],TableList:c["a"],PropBox:h["a"],AuditForm:v},data:function(){return{listLoading:!0,tableLoading:!1,isShowAuditSettingSearch:!1,auditSettingSearchData:{},isShowTableField:!1,isShowTableList:!1,tableField:{},tableList:{},searchData:{},paginationData:{},getChildDailogShowVal:"",tableRowId:"",dialogShow:{onChangeAudit:!1},openCode:{0:"未开启",1:"已开启"},isOpenList:[{name:"否",key:"0"},{name:"是",key:"1"}],isShowDialog:{},formData:{},newFormData:{}}},created:function(){this.fatchData(),this.isShowDialog=JSON.parse(JSON.stringify(this.dialogShow))},computed:{getAuditSettingDatas:function(){var t,e=this.auditSettingSearchData;return t=[{type:"text",labelName:"查询属性",key:"queryAttr"},{type:"text",labelName:e.name[1],key:e.name[0]}],t},getTableFields:function(){var t={data:[],button:[]},e=this.tableField;return this.isShowTableField&&(t.data[0]=e.name,t.data[0].push("100","center",{eventName:"onChangeAudit"}),t.data[1]=e.isUse,t.data[1].push("100","center"),t.button.push({name:"修改",eventName:"onChangeAudit"})),t},getSearchData:function(){var t=Object(d["a"])({page:0,size:10},this.searchData);return t},allSearchData:function(){var t=Object(d["a"])({page:0,size:10},this.paginationData,{},this.searchData);return t},filterTableList:function(){var t=this,e=this.tableList;return this.isShowTableList&&e.content.map((function(e){e.isUse=t.openCode[e.isUse]})),e}},watch:{getChildDailogShowVal:{handler:function(t){switch(this.getChildDailogShowVal){case"onChangeAudit":this.isShowDialog.onChangeAudit=!0;break;default:this.isShowDialog.onChangeAudit=!1;break}}}},methods:{updateDatas:function(){var t=this,e=this.$refs.form.getRulesData();if(e.data){var a=JSON.parse(JSON.stringify(this.newFormData));a.nodeList=JSON.stringify(a.nodeList),Object(g["bb"])(Object(d["a"])({id:this.tableRowId},a)).then((function(e){t.getChildDailogShowVal="",t.tableRowId="",t.$message({type:"success",message:e.msg}),t.init(t.allSearchData)}))}else this.$message({type:"error",message:e.msg})},getFormData:function(t){this.newFormData=t},getDiagdialogShow:function(){this.tableRowId="",this.getChildDailogShowVal=""},getTableChildID:function(t){this.tableRowId=t},changeAudit:function(){var t=this;Object(g["k"])(this.tableRowId).then((function(e){t.formData=e.data}))},getChildDailogShow:function(t){switch(this.getChildDailogShowVal=t,this.getChildDailogShowVal){case"onChangeAudit":this.changeAudit();break}},getChildCondition:function(t){this.searchData=t,this.init(this.getSearchData)},getChildPagination:function(t){this.paginationData=t,this.init(this.allSearchData)},fatchData:function(){var t=this;this.listLoading=!0,Object(g["m"])().then((function(e){t.isShowAuditSettingSearch=!0,t.auditSettingSearchData=e.data})),Object(g["o"])().then((function(e){t.isShowTableField=!0,t.tableField=e.data})),Object(g["p"])(this.getSearchData).then((function(e){t.listLoading=!1,t.isShowTableList=!0,t.tableList=e.data}))},init:function(t){var e=this;this.tableLoading=!0,Object(g["p"])(t).then((function(t){e.tableLoading=!1,e.isShowTableList=!0,e.tableList=t.data}))}}},L=w,C=Object(S["a"])(L,o,l,!1,null,null,null),F=C.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isShowReplaceAuditSearchField?a("SearchCondition",{attrs:{sentAttconditiondatas:t.getSearchField},on:{changeAttcondition:t.getChildCondition}}):t._e(),t._v(" "),a("div",{staticClass:"divBox"},[t.isShowTableField&&t.isShowTableList?a("TableList",{attrs:{sentTableFields:t.getTableField,sentTableData:t.tableList},on:{changePagination:t.getChildPagination}}):t._e()],1)],1)},y=[],A=a("4327"),_={components:{SearchCondition:r["a"],TableList:A["a"]},data:function(){return{isShowReplaceAuditSearchField:!1,replaceAuditSearchField:{},isShowTableField:!1,isShowTableList:!1,tableField:{},tableList:{},searchData:{},paginationData:{}}},computed:{getSearchField:function(){var t,e=this.replaceAuditSearchField;return this.isShowReplaceAuditSearchField&&(t=[{type:"text",labelName:e.auditSetting[1],key:e.auditSetting[0]},{type:"select",labelName:e.auditLevel[1],key:e.auditLevel[0],items:{optionType:1}},{type:"text",labelName:e.originalName[1],key:e.originalName[0]},{type:"text",labelName:e.agencyName[1],key:e.agencyName[0]},{type:"select",labelName:e.isValid[1],key:e.isValid[0],items:{optionType:1}},{type:"select",labelName:e.isOpen[1],key:e.isOpen[0],items:{optionType:1}}]),t},getTableField:function(){var t={data:[],button:[]},e=this.tableField;return this.isShowTableField&&(t.data[0]=e.auditLevel,t.data[0].push("100","center"),t.data[1]=e.OddAuditName,t.data[1].push("100","center"),t.data[2]=e.newAuditName,t.data[2].push("100","center"),t.data[3]=e.createdSta,t.data[3].push("100","center"),t.data[4]=e.createdEnd,t.data[4].push("100","center"),t.data[5]=e.isValid,t.data[5].push("100","center"),t.data[6]=e.isOpen,t.data[6].push("100","center"),t.button[0]="删除"),t},getSearchData:function(){var t=Object(d["a"])({page:0,size:10},this.searchData);return t},allSearchData:function(){var t=Object(d["a"])({},this.paginationData,{},this.searchData);return t}},created:function(){this.fatchData()},methods:{getChildPagination:function(t){this.paginationData=t,this.init(this.allSearchData)},getChildCondition:function(t){this.searchData=t,this.init(this.getSearchData)},fatchData:function(){var t=this;Object(g["getReplaceAuditSearch"])().then((function(e){t.isShowReplaceAuditSearchField=!0,t.replaceAuditSearchField=e.data})),Object(g["getReplaceAuditTableField"])().then((function(e){t.isShowTableField=!0,t.tableField=e.data})),Object(g["getReplaceAuditTableList"])(this.getSearchData).then((function(e){t.isShowTableList=e.data,t.tableList=e.data}))},init:function(t){var e=this;Object(g["getReplaceAuditTableList"])(t).then((function(t){e.isShowTableList=t.data,e.tableList=t.data}))}}},O=_,T=Object(S["a"])(O,I,y,!1,null,null,null),k=T.exports,x={components:{conditionShow:s["a"],auditSetting:F,replaceAudit:k},data:function(){return{isShowReplaceAuditSearch:!1,replaceAuditSearchData:{},isShowAuditSettingButtonA:!1,auditSettingButtonA:{},buttonA:{0:["0","审批设置"],1:["1","代批设置"],reLeadApprovalStatus:["reLeadApprovalStatus","审批设置"]},pageName:"审批设置",buttonList:[]}},created:function(){this.fatchData()},computed:{buttonConditionList:function(){}},methods:{getButtonData:function(t){0==t.reLeadApprovalStatus?this.pageName="审批设置":1==t.reLeadApprovalStatus&&(this.pageName="代批设置")},fatchData:function(){var t,e=this.buttonA,a=[];t={title:e.reLeadApprovalStatus[1],fieldName:e.reLeadApprovalStatus[0],dataType:"button",showed:!0,icinDef:!1,iconShow:!1,items:[{name:e[0][1],fieldName:e[0][0],active:!0,num:0,id:"1-1"},{name:e[1][1],fieldName:e[1][0],active:!1,num:0,id:"1-2"}]},a.push(t),this.buttonList=a}}},N=x,j=Object(S["a"])(N,i,n,!1,null,null,null);e["default"]=j.exports},"456d":function(t,e,a){var i=a("4bf8"),n=a("0d58");a("5eda")("keys",(function(){return function(t){return n(i(t))}}))},"5eda":function(t,e,a){var i=a("5ca1"),n=a("8378"),s=a("79e5");t.exports=function(t,e){var a=(n.Object||{})[t]||Object[t],o={};o[t]=e(a),i(i.S+i.F*s((function(){a(1)})),"Object",o)}},"92cb":function(t,e,a){"use strict";var i=a("b854"),n=a.n(i);n.a},b854:function(t,e,a){}}]);