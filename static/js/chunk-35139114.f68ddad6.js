(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35139114"],{"28ba":function(e,t,a){},"53f7":function(e,t,a){"use strict";var i=a("ae93"),o=a.n(i);o.a},9107:function(e,t,a){},ae93:function(e,t,a){},b4b7:function(e,t,a){"use strict";var i=a("9107"),o=a.n(i);o.a},c2d1:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticStyle:{"min-height":"100vh"},attrs:{"element-loading-text":e.loadingStyle.title,"element-loading-spinner":e.loadingStyle.spinner,"element-loading-background":e.loadingStyle.background}},[e.getSearchFieldsTimeLoaded?a("ConditionShow",{attrs:{sentconditiondatas:e.buttonConditionList},on:{changecondition:e.getChildCondition}}):e._e(),e._v(" "),e.getAttributeConditionLoaded?a("SearchCondition",{attrs:{sentAttconditiondatas:e.attributeConditionList},on:{changeAttcondition:e.getChildAttribute}}):e._e(),e._v(" "),a("div",{staticClass:"divBox",staticStyle:{padding:"20px 20px"}},[a("div",{staticStyle:{padding:"10px 0"}},[a("TableTopButton",{attrs:{sentBatchOperationDatas:e.batchOperationDatas},on:{changeChildDailogShow:e.getChildDailogShow}})],1),e._v(" "),e.getTableFieldsLoaded&&e.getTableDataLoaded?a("TableList",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{"min-height":"100vh"},attrs:{"element-loading-text":e.loadingStyle.title,"element-loading-spinner":e.loadingStyle.spinner,"element-loading-background":e.loadingStyle.background,sentClearSelectIDsDatas:e.clearSelectIDsDatas,sentTableFields:e.tableFieldsList,sentTableData:e.getTableData},on:{changePagination:e.getChildPagination,getSelectIDs:e.getSelectChildIDsDatas,getTableID:e.getTableChildID,changeChildDailogShow:e.getChildDailogShow}}):e._e()],1),e._v(" "),a("article",[e.dailogShow.onTabelEvent?a("PropBox",{attrs:{sentdialogVisible:e.dailogShow.onTabelEvent},on:{changeDiagdialogShow:e.getDiagdialogShow,saveData:e.SaveOrUpdate},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("鉴定登记")]},proxy:!0},{key:"article",fn:function(){return[a("ul",[a("li",{attrs:{title:"基础信息"}},[e.getDatasByIDloaded?a("PropBaseMessage",{ref:"checkForm",attrs:{sentSelectTableListData:e.getDatasByID},on:{changePropBaseMessageData:e.getbaseMessageDatas}}):e._e()],1),e._v(" "),a("li",{attrs:{title:"鉴定过程"}},[e.getDatasByIDloaded?a("PropAppraisalProcess",{ref:"checkFormPropAppraisalProcess",attrs:{sentSelectTableListData:e.getDatasByID},on:{changePropBaseMessageData:e.getAppraisalProcessDatas}}):e._e()],1),e._v(" "),a("li",{attrs:{title:"鉴定结果"}},[e.getDatasByIDloaded?a("PropAppraisalResult",{ref:"checkFormPropAppraisalResult",attrs:{sentSelectTableListData:e.getDatasByID},on:{changePropBaseMessageData:e.getAppraisalResultDatas}}):e._e()],1)])]},proxy:!0},{key:"confirm",fn:function(){return[e._v("保存")]},proxy:!0},{key:"customButton",fn:function(){return[a("el-button",{staticClass:"button_default",attrs:{size:"small"},on:{click:e.updateRegisterDatas}},[e._t("confirm",[e._v("提交")])],2)]},proxy:!0},{key:"cancel",fn:function(){return[e._v("取消")]},proxy:!0}],null,!0)}):e._e()],1),e._v(" "),a("article",[e.dailogShow.updataDemoFile?a("UpdataDemoFile",{attrs:{sendFileAPI:"/yuan/collection/regustraterAllocation/importReAllocation",sendTitle:"批量导入"},on:{changeDiagdialogShow:e.getDiagdialogShow}}):e._e(),e._v(" "),e.dailogShow.updataAllFile?a("UpdataDemoFile",{attrs:{sendFileAPI:"/yuan/collection/regustraterAllocation/importReAllocation",sendTitle:"文件批量导入"},on:{changeDiagdialogShow:e.getDiagdialogShow}}):e._e()],1)],1)},o=[],n=a("db72"),s=(a("7f7f"),a("e3b6")),l=a("f972"),r=a("80fb"),c=a("4327"),d=a("d921"),u=a("c552"),p=a("bbe1"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.form.length>0?a("div",e._l(e.form,(function(t,i){return a("div",{key:i,staticClass:"prop_content_box"},[a("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),a("span",[e._v("鉴定过程")]),e._v(" "),e.formDataLoaded?a("div",{staticClass:"prop_form"},[a("el-form",{ref:"form",refInFor:!0,attrs:{rules:e.rules,model:t,"label-position":"left",size:"mini",disabled:t.disabled}},[a("section",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"left"},[a("el-form-item",{attrs:{label:e.formData.appraisalTime[1],prop:"appraisalTime","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.appraisalTime,callback:function(a){e.$set(t,"appraisalTime",a)},expression:"item.appraisalTime"}})],1)],1),e._v(" "),a("div",{staticClass:"right"},[a("el-form-item",{attrs:{label:e.formData.chargePersonId[1],prop:"chargePersonId","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:t.chargePersonId,callback:function(a){e.$set(t,"chargePersonId",a)},expression:"item.chargePersonId"}},e._l(e.AllUserInfo,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)]),e._v(" "),a("section",[a("div",[a("el-form-item",{attrs:{label:e.formData.appraisalSite[1],"label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.appraisalSite,callback:function(a){e.$set(t,"appraisalSite",a)},expression:"item.appraisalSite"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.appraisalInstitution[1],prop:"appraisalInstitution","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:t.appraisalInstitution,callback:function(a){e.$set(t,"appraisalInstitution",a)},expression:"item.appraisalInstitution"}},e._l(e.AppraisalInstitution,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.appraisalFilesId[1],"label-width":e.formLabelWidth}},[a("UploadFile",{attrs:{sendFilesIDsDatas:t.appraisalFilesId},on:{changeFilesIDs:e.getFilesIDs}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.experts[1],"label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",type:"textarea"},model:{value:t.experts,callback:function(a){e.$set(t,"experts",a)},expression:"item.experts"}})],1)],1)]),e._v(" "),a("section",[a("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:e.formData.opinions[1],"label-width":e.formLabelWidth}},e._l(e.addDataArray,(function(t,i){return a("div",{key:i,staticStyle:{"margin-bottom":"10px",overflow:"hidden"}},[a("el-input",{staticStyle:{width:"200px",float:"left","margin-right":"20px"},model:{value:t.expertName,callback:function(a){e.$set(t,"expertName",a)},expression:"obj.expertName"}},[a("template",{slot:"prepend"},[e._v("专家名：")])],2),e._v(" "),e.addDataArray.length>1?a("el-input",{staticStyle:{width:"calc(100% - 320px)",float:"left"},attrs:{placeholder:"专家鉴定意见",title:"专家鉴定意见",type:"textarea",autosize:""},model:{value:t.appraisalOpinion,callback:function(a){e.$set(t,"appraisalOpinion",a)},expression:"obj.appraisalOpinion"}}):a("el-input",{staticStyle:{width:"calc(100% - 220px)",float:"left"},attrs:{placeholder:"专家鉴定意见",title:"专家鉴定意见",type:"textarea",autosize:""},model:{value:t.appraisalOpinion,callback:function(a){e.$set(t,"appraisalOpinion",a)},expression:"obj.appraisalOpinion"}}),e._v(" "),e.addDataArray.length>1?a("div",{staticStyle:{width:"15%","max-width":"80px",float:"right"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.deleteRow(t.id,i)}}},[e._v("删除")])],1):e._e()],1)})),0)],1),e._v(" "),a("section",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"button_default",attrs:{size:"mini"},on:{click:e.addNewRow}},[e._v("添加一行")])],1)])],1):e._e()],1)})),0):e._e()},g=[],m=a("0fec"),f=a("4431"),b={name:"PropAppraisalProcess",components:{UploadFile:m["a"]},props:{sentSelectTableListData:{type:Object,default:function(){}}},data:function(){return{dialogFormVisible:!0,formLabelWidth:"90px",formDataLoaded:!1,formData:{},form:[],rules:{appraisalTime:[{required:!0,message:"请输入鉴定时间",trigger:"blur"}],chargePersonId:[{required:!0,message:"请输入负责人",trigger:"change"}],appraisalInstitution:[{required:!0,message:"请输入鉴定机构",trigger:"blur"}]},solicitationInstructions:[],id:[],AllUserInfo:[],AppraisalInstitution:[],filesIdsDatas:[],addDataArray:[{id:"",expertName:"",appraisalOpinion:""}],UpdateDataArrays:[]}},computed:{formDatas:function(){if(this.form.length>0)var e=this.form[this.form.length-1],t={appraisalProcessInfoId:e.appraisalProcessInfoId||"",id:e.collectionId,appraisalTime:e.appraisalTime,chargePersonId:e.chargePersonId,appraisalSite:e.appraisalSite,appraisalInstitution:e.appraisalInstitution,experts:e.experts,appraisalFilesId:this.filesIds,opinions:e.opinions};return t},filesIds:function(){var e=[];return this.form.length>0&&this.form[this.form.length-1].appraisalFilesId.map((function(t){e.push(t.key)})),this.PMethods.ArrayToString(e)}},watch:{formDatas:{handler:function(e){this.$emit("changePropBaseMessageData",e)},immediate:!0,deep:!0},addDataArray:{handler:function(e){this.form[0].opinions=JSON.stringify(e)},deep:!0}},methods:{getRulesData:function(){var e=!1;return this.$refs.form[0].validate((function(t){e=t})),{msg:e?"表单验证通过":"请检查输入的表单是否有误",bl:e}},deleteRow:function(e,t){var a=[],i=this.addDataArray.splice(t,1);i.delete=!0,a.push(i)},addNewRow:function(){this.addDataArray.push({id:"",expertName:"",appraisalOpinion:""}),this.UpdateDataArrays.push({id:"",expertName:"",appraisalOpinion:""})},getFilesIDs:function(e){this.form[this.form.length-1].appraisalFilesId=e},initFields:function(){this.formData={appraisalTime:["appraisalTime","鉴定时间"],chargePersonId:["chargePersonId","负责人"],appraisalSite:["appraisalSite","鉴定地点"],appraisalInstitution:["appraisalInstitution","鉴定机构"],appraisalFilesId:["appraisalFilesId","过程文档"],experts:["experts","参与专家"],opinions:["opinions","意见记录"]},this.formDataLoaded=!0},initFormDatas:function(){var e=new Date;this.form.recruitTime=this.PMethods.DateFormat("YYYY-mm-dd",e);var t=this.sentSelectTableListData.data.id,a=this.sentSelectTableListData.data.appraisalProcessInfo;if(void 0!=a&&null!=a&&""!=a){var i=[];a.appraisalFiles.map((function(e){i.push({key:e.files.id,name:"".concat(e.files.name,".").concat(e.files.extName)})}));var o={collectionId:a.collectionId,appraisalProcessInfoId:a.id,appraisalTime:a.appraisalTime,chargePersonId:a.chargePersonId,appraisalSite:a.appraisalSite,appraisalInstitution:a.appraisalInstitution,opinions:a.opinions,appraisalFilesId:i,experts:a.experts,disabled:!1};this.form.push(o)}else{var n={collectionId:t,appraisalProcessInfoId:"",appraisalTime:this.PMethods.DateFormat("YYYY-mm-dd",e),chargePersonId:"",appraisalSite:"",appraisalInstitution:"",opinions:"",appraisalFilesId:[],experts:"",disabled:!1};this.form.push(n)}},fetch:function(){var e=this;this.formDataLoaded=!1,Object(f["x"])().then((function(t){e.AllUserInfo=t.data})),Object(f["Jb"])({optionType:3}).then((function(t){e.AppraisalInstitution=t.data.optionInfoItemList})),this.initFields(),this.initFormDatas()}},beforeCreate:function(){},created:function(){this.fetch()},beforeMount:function(){},mounted:function(){},updated:function(){}},D=b,v=(a("c3a6"),a("2877")),I=Object(v["a"])(D,h,g,!1,null,null,null),y=I.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.form.length>0?a("div",e._l(e.form,(function(t,i){return a("div",{key:i,staticClass:"prop_content_box"},[a("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),a("span",[e._v("鉴定结果")]),e._v(" "),e.formDataLoaded?a("div",{staticClass:"prop_form"},[a("el-form",{attrs:{model:t,"label-position":"left",size:"mini",disabled:t.disabled}},[a("section",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"left"},[a("el-form-item",{attrs:{label:e.formData.totalRegistrationMark[1],"label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.totalRegistrationMark,callback:function(a){e.$set(t,"totalRegistrationMark",a)},expression:"item.totalRegistrationMark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.age[1],prop:"personInCharge","label-width":e.formLabelWidth}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.age},on:{change:e.handleChange},model:{value:t.age,callback:function(a){e.$set(t,"age",a)},expression:"item.age"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.texture[1],prop:"personInCharge","label-width":e.formLabelWidth}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.texture},on:{change:e.handleChange},model:{value:t.texture,callback:function(a){e.$set(t,"texture",a)},expression:"item.texture"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.author[1],"label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.author,callback:function(a){e.$set(t,"author",a)},expression:"item.author"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.actualNumber[1],"label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.actualNumber,callback:function(a){e.$set(t,"actualNumber",a)},expression:"item.actualNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.degreeDisability[1],"label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:t.degreeDisability,callback:function(a){e.$set(t,"degreeDisability",a)},expression:"item.degreeDisability"}},e._l(e.degreeDisability,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.gradeEvaluationId[1],"label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:t.gradeEvaluationId,callback:function(a){e.$set(t,"gradeEvaluationId",a)},expression:"item.gradeEvaluationId"}},e._l(e.gradeEvaluationId,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),a("div",{staticClass:"right"},[a("el-form-item",{attrs:{label:e.formData.classificationNumber[1],"label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.classificationNumber,callback:function(a){e.$set(t,"classificationNumber",a)},expression:"item.classificationNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.concreteAge[1],"label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.concreteAge,callback:function(a){e.$set(t,"concreteAge",a)},expression:"item.concreteAge"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.typeId[1],prop:"personInCharge","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:t.typeId,callback:function(a){e.$set(t,"typeId",a)},expression:"item.typeId"}},e._l(e.typeId,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.color[1],"label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.color,callback:function(a){e.$set(t,"color",a)},expression:"item.color"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.expertValuation[1],"label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.expertValuation,callback:function(a){e.$set(t,"expertValuation",a)},expression:"item.expertValuation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.purpose[1],"label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.purpose,callback:function(a){e.$set(t,"purpose",a)},expression:"item.purpose"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.formData.weight[1],"label-width":e.formLabelWidth}},[a("section",{staticStyle:{overflow:"hidden"}},[a("el-input",{staticStyle:{width:"calc(100% - 80px)"},attrs:{autocomplete:"off"},model:{value:t.weight,callback:function(a){e.$set(t,"weight",a)},expression:"item.weight"}}),e._v(" "),a("el-select",{staticStyle:{width:"70px"},attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:t.weightUnit,callback:function(a){e.$set(t,"weightUnit",a)},expression:"item.weightUnit"}},e._l(e.weightUnit,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)])],1)]),e._v(" "),a("section",[a("div",[a("el-form-item",{attrs:{label:e.formData.size[1],"label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"30%",float:"left","margin-right":"5%"},attrs:{autocomplete:"off"},model:{value:t.length,callback:function(a){e.$set(t,"length",a)},expression:"item.length"}},[a("template",{slot:"prepend"},[e._v("长：")])],2),e._v(" "),a("el-input",{staticStyle:{width:"30%",float:"left","margin-right":"5%"},attrs:{autocomplete:"off"},model:{value:t.width,callback:function(a){e.$set(t,"width",a)},expression:"item.width"}},[a("template",{slot:"prepend"},[e._v("宽：")])],2),e._v(" "),a("el-input",{staticStyle:{width:"30%",float:"right"},attrs:{autocomplete:"off"},model:{value:t.height,callback:function(a){e.$set(t,"height",a)},expression:"item.height"}},[a("template",{slot:"prepend"},[e._v("高：")])],2)],1)],1)]),e._v(" "),a("section",[a("div",[a("el-form-item",{attrs:{label:e.formData.warehouse[1],"label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{float:"left",width:"30%","margin-right":"5%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{change:e.onWarehouseId},model:{value:t.warehouseId,callback:function(a){e.$set(t,"warehouseId",a)},expression:"item.warehouseId"}},e._l(e.warehouseId,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._v(" "),a("el-select",{staticStyle:{float:"left",width:"30%","margin-right":"5%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{change:e.onEncodings},model:{value:t.encodings,callback:function(a){e.$set(t,"encodings",a)},expression:"item.encodings"}},e._l(e.encodings,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._v(" "),a("el-select",{staticStyle:{float:"right",width:"30%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:t.layerNumber,callback:function(a){e.$set(t,"layerNumber",a)},expression:"item.layerNumber"}},e._l(e.layerNumber,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1)])])],1):e._e()],1)})),0):e._e()},w=[],x={name:"PropAppraisalResult",props:{sentSelectTableListData:{type:Object,default:function(){}}},data:function(){return{dialogFormVisible:!0,formLabelWidth:"90px",formDataLoaded:!1,formData:{},form:[],solicitationInstructions:[],id:[],AllUserInfo:[],AppraisalInstitution:[],texture:[],age:[],typeId:[],degreeDisability:[],gradeEvaluationId:[],weightUnit:[],warehouseId:[],encodings:[],layerNumber:[],filesIdsDatas:[],addDataArray:[{id:"",expertName:"",appraisalOpinion:""}],UpdateDataArrays:[]}},computed:{formDatas:function(){if(this.form.length>0)var e=this.form[this.form.length-1],t={appraisalResultId:e.appraisalResultId||"",collectionId:e.collectionId,totalRegistrationMark:e.totalRegistrationMark,classificationNumber:e.classificationNumber,ageOneId:e.age[0]||"",ageTwoId:e.age[1]||"",ageThreeId:e.age[2]||"",ageFourId:e.age[3]||"",concreteAge:e.concreteAge,textureOneId:e.texture[0]||"",textureTwoId:e.texture[1]||"",textureThreeId:e.texture[2]||"",typeId:e.typeId,author:e.author,color:e.color,actualNumber:e.actualNumber,expertValuation:e.expertValuation,degreeDisability:e.degreeDisability,purpose:e.purpose,gradeEvaluationId:e.gradeEvaluationId,weight:e.weight,weightUnit:e.weightUnit,length:e.length,width:e.width,height:e.height,warehouseId:e.warehouseId,encodings:e.encodings,layerNumber:e.layerNumber};return t}},watch:{formDatas:{handler:function(e){this.$emit("changePropBaseMessageData",e)},immediate:!0,deep:!0}},methods:{onWarehouseId:function(){var e=this;Object(f["Mb"])({warehouseId:this.form[0].warehouseId}).then((function(t){e.encodings=t.data,e.form[0].encodings="",e.form[0].layerNumber=""}))},onEncodings:function(){var e=this;Object(f["Lb"])({id:this.form[0].encodings}).then((function(t){e.layerNumber=t.data,e.form[0].layerNumber=""}))},handleChange:function(e){console.log(e)},initFields:function(){this.formData={totalRegistrationMark:["totalRegistrationMark","总登记号"],classificationNumber:["classificationNumber","分类号"],age:["age","具体年代"],concreteAge:["concreteAge","具体年代"],texture:["texture","质地类别"],typeId:["typeId","藏品类别"],author:["author","作者"],color:["color","色泽"],actualNumber:["actualNumber","实际数量"],expertValuation:["expertValuation","专家估价"],degreeDisability:["degreeDisability","完残程度"],purpose:["purpose","用途"],gradeEvaluationId:["gradeEvaluationId","级别评定"],weight:["weight","质量"],weightUnit:["weightUnit","单位"],size:["size","尺寸"],length:["length","长"],width:["width","宽"],height:["height","高"],warehouse:["warehouse","藏品拨库"],warehouseId:["warehouseId","库房选择"],encodings:["encodings","藏品柜编号"],layerNumber:["layerNumber","层数"]},this.formDataLoaded=!0},initFormDatas:function(){var e=this,t=new Date;this.form.recruitTime=this.PMethods.DateFormat("YYYY-mm-dd",t);var a=this.sentSelectTableListData.data.id,i=this.sentSelectTableListData.data.appraisalResult;if(void 0!=i&&null!=i&&""!=i){Object(f["Mb"])({warehouseId:i.warehouseId}).then((function(t){e.encodings=t.data})),Object(f["Lb"])({id:i.encodings}).then((function(t){e.layerNumber=t.data}));var o=(i.ageOneId||"")+","+(i.ageTwoId||"")+","+(i.ageThreeId||"")+","+(i.ageFourId||"");o=this.PMethods.StringToArray(o);var n=(i.textureOneId||"")+","+(i.textureTwoId||"")+","+(i.textureThreeId||"");n=this.PMethods.StringToArray(n);var s={id:a,appraisalResultId:i.id,totalRegistrationMark:i.totalRegistrationMark,classificationNumber:i.classificationNumber,age:o,concreteAge:i.concreteAge,texture:n,typeId:i.typeId,author:i.author,color:i.color,actualNumber:i.actualNumber,expertValuation:i.expertValuation,degreeDisability:i.degreeDisability,purpose:i.purpose,gradeEvaluationId:i.gradeEvaluationId,weight:i.weight,weightUnit:i.weightUnit,length:i.length,width:i.width,height:i.height,warehouseId:i.warehouseId,encodings:i.encodings,layerNumber:i.layerNumber,disabled:!1};this.form.push(s)}else{var l={id:a,appraisalResultId:"",totalRegistrationMark:"",classificationNumber:"",age:[],concreteAge:"",texture:[],typeId:"",author:"",color:"",actualNumber:"",expertValuation:"",degreeDisability:"",purpose:"",gradeEvaluationId:"",weight:"",weightUnit:"",size:"",length:"",width:"",height:"",warehouseId:"",encodings:"",layerNumber:"",disabled:!1};this.form.push(l)}},fetch:function(){var e=this;this.formDataLoaded=!1,Object(f["x"])().then((function(t){e.AllUserInfo=t.data})),Object(f["Jb"])({optionType:3}).then((function(t){e.AppraisalInstitution=t.data.optionInfoItemList})),Object(f["Jb"])({optionType:4}).then((function(t){e.typeId=t.data.optionInfoItemList})),Object(f["Jb"])({optionType:6}).then((function(t){e.degreeDisability=t.data.optionInfoItemList})),Object(f["Jb"])({optionType:8}).then((function(t){e.gradeEvaluationId=t.data.optionInfoItemList})),Object(f["Jb"])({optionType:7}).then((function(t){e.weightUnit=t.data.optionInfoItemList})),Object(f["Kb"])({optionType:1}).then((function(t){e.texture=e.PMethods.ArrayMap(t.data.optionInfoCascadeItemList)})),Object(f["Kb"])({optionType:2}).then((function(t){e.age=e.PMethods.ArrayMap(t.data.optionInfoCascadeItemList)})),Object(f["Qd"])().then((function(t){e.warehouseId=t.data})),this.initFields(),this.initFormDatas()}},beforeCreate:function(){},created:function(){this.fetch()},beforeMount:function(){},mounted:function(){},updated:function(){}},T=x,A=(a("53f7"),Object(v["a"])(T,S,w,!1,null,null,null)),k=A.exports,_=a("7bb5"),L={name:"Regallocate",components:{ConditionShow:s["a"],SearchCondition:l["a"],TableTopButton:r["a"],TableList:c["a"],PropBox:d["a"],PropBaseMessage:u["a"],PropSolicitation:p["a"],PropAppraisalProcess:y,PropAppraisalResult:k,UpdataDemoFile:_["a"]},data:function(){return{batchOperationDatas:{left:[{name:"批量提交",eventName:"onBatchSubmit"}],right:[{name:"模板下载",eventName:"ReloadFile"},{name:"批量导入",eventName:"updataDemoFile"},{name:"文件批量导入",eventName:"updataAllFile"},{name:"表格导出",eventName:"ReloadTable"}]},buttonEventArr:{onBatchSubmit:!1,ReloadFile:!1,updataDemoFile:!1,updataAllFile:!1,ReloadTable:!1,onTabelEvent:!1,onToExamine:!1,onDelete:!1},batchRegisterDatas:{},baseMessageDatas:{},propAppraisalProcessDatas:{},propAppraisalResultDatas:{},getPersonInChargeID:"",SearchItemDatas:"",apResultStatus:0,apResultRegisterState:0,getChildDailogShowVal:"",pageLoading:!0,loadingStyle:{title:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.8)"},dailogShow:{},getSearchFieldsTimeLoaded:!1,getSearchFieldsTimeData:{},getAttributeConditionLoaded:!1,getAttributeConditionData:{},getTableFields:{},getTableFieldsLoaded:!1,getTableData:[],getTableDataLoaded:!1,tableloading:!0,getButtonConditionDatas:{},getAttrConditionDatas:{},getPaginationDatas:{},clearSelectIDsDatas:0,getSelectIDsDatas:[],getDatasByIDs:{},getDatasByIDsLoaded:!1,getSelectIDData:{},getDatasByID:{},getDatasByIDloaded:!1}},computed:{buttonConditionList:function(){var e,t,a,i=this.SearchItemDatas.apResultStatus,o=this.SearchItemDatas.apResultRegisterState,n=this.getSearchFieldsTimeData,s=[];return e={title:i.apResultStatus[1],fieldName:i.apResultStatus[0],dataType:"button",showed:!0,iconDef:!0,iconShow:!0,items:[{name:i[0][1],fieldName:i[0][0],active:!0,num:0,id:"1-1"},{name:i[1][1],fieldName:i[1][0],active:!1,num:0,id:"1-2"},{name:i[2][1],fieldName:i[2][0],active:!1,num:0,id:"1-3"},{name:i[3][1],fieldName:i[3][0],active:!1,num:0,id:"1-4"}]},s.push(e),t={title:o.apResultRegisterState[1],fieldName:o.apResultRegisterState[0],dataType:"button",showed:!0,iconDef:!0,iconShow:!0,items:[{name:o[0][1],fieldName:o[0][0],active:!0,num:0,id:"2-1"},{name:o[1][1],fieldName:o[1][0],active:!1,num:0,id:"2-2"},{name:o[2][1],fieldName:o[2][0],active:!1,num:0,id:"2-3"}]},s.push(t),a={title:n.enterWarehouseTime[1],fieldName:n.enterWarehouseTime[0],createdSta:n.createdSta[0],createdEnd:n.createdEnd[0],dataType:"regdate",showed:!0,iconDef:!0,dataPicker:!0,iconShow:!1,items:[{name:n[0][1],fieldName:n[0][0],active:!1,num:0,id:"3-1"},{name:n[1][1],fieldName:n[1][0],active:!1,num:0,id:"3-2"},{name:n[2][1],fieldName:n[2][0],active:!1,num:0,id:"3-3"},{name:n[3][1],fieldName:n[3][0],active:!1,num:0,id:"3-4"},{name:n[4][1],fieldName:n[4][0],active:!1,num:0,id:"3-5"},{name:n[5][1],fieldName:n[5][0],active:!1,num:0,id:"3-6"}]},s.push(a),s},attributeConditionList:function(){var e=this.getAttributeConditionData,t=[];return t=[{type:"text",labelName:e.collectionAttribute[1],key:e.collectionAttribute[0]},{type:"text",labelName:e.name[1],key:e.name[0]},{type:"select",labelName:e.sourceId[1],key:e.sourceId[0],items:{optionType:0},data:"server"},{type:"select",labelName:e.uploadingPeopleId[1],key:e.uploadingPeopleId[0],items:{optionType:100},data:"server"}],t},tableFieldsList:function(){var e={data:[],button:[]},t=JSON.parse(JSON.stringify(this.getTableFields));return e.data[0]=t.name,e.data[0].push("220","left",{eventName:"onTabelEvent"}),e.data[1]=t.offer,e.data[1].push("120","center"),e.data[2]=t.quantity,e.data[2].push("100","center"),e.data[3]=t.sourceId,e.data[3].push("120","center"),e.data[4]=t.enterWarehouseTime,e.data[4].push("200","center"),e.data[5]=t.apResultRegisterState,e.data[5].push("110","center"),e.button.push({name:"登记拨库",eventName:"onTabelEvent"}),e.button.push({name:"提交",eventName:"onTabelEvent"}),e.button.push({name:"删除",eventName:"onDelete"}),e},AllConditionDatas:function(){var e={};return e=Object(n["a"])({},this.getButtonConditionDatas,{},this.getAttrConditionDatas,{},this.getPaginationDatas),e},SearchConditionDatas:function(){var e={};return e=Object(n["a"])({size:10,page:0},this.getButtonConditionDatas,{},this.getAttrConditionDatas),e},BatchAllDatas:function(){var e={};return e=Object(n["a"])({},this.propAppraisalProcessDatas,{},this.propAppraisalResultDatas,{},this.baseMessageDatas),e}},watch:{getChildDailogShowVal:{handler:function(e){switch(e){case"onBatchSubmit":break;case"ReloadFile":break;case"updataDemoFile":this.dailogShow.updataDemoFile=!0;break;case"updataAllFile":this.dailogShow.updataAllFile=!0;break;case"ReloadTable":break;case"onTabelEvent":this.dailogShow.onTabelEvent=!0;break;default:this.dailogShow=Object.assign({},this.buttonEventArr);break}}},immediate:!0},methods:{getBatchRegisterDatas:function(e){console.log("parent",e),this.batchRegisterDatas={},this.batchRegisterDatas=e},getbaseMessageDatas:function(e){console.log("AppraisalResultDatas",e),this.baseMessageDatas={},this.baseMessageDatas=e},getAppraisalProcessDatas:function(e){console.log("AppraisalResultDatas",e),this.propAppraisalProcessDatas={},this.propAppraisalProcessDatas=e},getAppraisalResultDatas:function(e){console.log("AppraisalResultDatas",e),this.propAppraisalResultDatas={},this.propAppraisalResultDatas=e},onBatchSubmit:function(){var e=this;this.getSelectIDsDatas.length>0?this.$confirm("此操作将提交藏品信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.PMethods.ArrayToString(e.getSelectIDsDatas);Object(f["Gc"])({ids:t}).then((function(t){console.log(t),e.successDailogMessage("提交成功")}))})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message("请选择要操作的藏品信息")},ReloadFile:function(){var e=this;this.$confirm("此操作将模板下载, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.PMethods.ArrayToString(e.getSelectIDsDatas);Object(f["Kc"])({ids:t}).then((function(t){console.log(t),e.PMethods.TableDemoDownLoad(t.data)}))})).catch((function(){e.$message({type:"info",message:"已取消"})}))},ReloadTable:function(){var e=this;this.$confirm("是否导出为表格?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.PMethods.ArrayToString(e.getSelectIDsDatas);Object(f["q"])({ids:t}).then((function(t){e.PMethods.TableDemoDownLoad(t.data)}))})).catch((function(){e.tipsMessage("已取消")}))},SaveOrUpdate:function(){var e=this,t=this.$refs.checkFormPropAppraisalProcess.getRulesData();t.bl?Object(f["ge"])(this.BatchAllDatas).then((function(t){0==t.code?e.successDailogMessage():e.notifyMessage(t.msg)})):this.notifyMessage(t.msg)},updateRegisterDatas:function(){var e=this,t=this.$refs.checkFormPropAppraisalProcess.getRulesData();t.bl?Object(f["Dc"])(this.BatchAllDatas).then((function(t){0==t.code?e.successDailogMessage():e.notifyMessage(t.msg)})):this.notifyMessage(t.msg)},getChildDailogShow:function(e){switch(this.getChildDailogShowVal=e,this.getChildDailogShowVal){case"onBatchSubmit":this.onBatchSubmit();break;case"ReloadFile":this.ReloadFile();break;case"updataDemoFile":break;case"updataAllFile":break;case"ReloadTable":this.ReloadTable();break;case"onTabelEvent":break;case"onDelete":this.onDelete();break;default:break}},successDailogMessage:function(e){this.PMethods.SuccessMessage(e),this.getSelectIDsDatas=[],this.getSelectIDData={},this.clearSelectIDsDatas=Math.random(),this.getChildDailogShowVal="",this.getDatasByIDloaded=!1,this.getTableLise(this.SearchConditionDatas)},notifyMessage:function(e){this.PMethods.WarningMessage(e)},tipsMessage:function(e){this.PMethods.TipsMessage(e)},onBatchNewList:function(){var e=this;this.getSelectIDsDatas.length>0?this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.PMethods.ArrayToString(e.getSelectIDsDatas);Object(f["d"])({ids:t}).then((function(t){console.log(t),e.successDailogMessage("删除成功")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})})):this.$message("请选择要删除的藏品信息")},onDelete:function(){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(f["j"])({id:e.getSelectIDData}).then((function(t){console.log(t),e.successDailogMessage("删除成功")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},getTableSelectedDatas:function(){var e=this,t=this.PMethods.ArrayToString(this.getSelectIDsDatas);t.length>5?(this.getDatasByIDsLoaded=!1,Object(f["getSolicationSearchById"])({ids:t}).then((function(t){e.getDatasByIDs=t,e.getDatasByIDsLoaded=!0}))):this.$message("请选择要操作的藏品信息")},getTableChildID:function(e){var t=this;this.getSelectIDData=e,this.getDatasByIDloaded=!1,Object(f["Ec"])({id:e}).then((function(e){t.getDatasByID=e,t.getDatasByIDloaded=!0}))},onPersonInChargeAdminID:function(e){this.getPersonInChargeID=e},getDiagdialogShow:function(){this.getChildDailogShowVal="",this.getSelectIDData=[]},getSelectChildIDsDatas:function(e){this.getSelectIDsDatas=e},getChildPagination:function(e){this.getPaginationDatas=e,this.getTableLise(this.AllConditionDatas)},getChildAttribute:function(e){this.getAttrConditionDatas=e,this.getTableLise(this.SearchConditionDatas)},getChildCondition:function(e){this.getButtonConditionDatas=e,this.getTableLise(this.SearchConditionDatas)},getTableLise:function(e){var t=this;this.tableloading=!0;var a=this;Object(f["Ic"])(e).then((function(e){e.data.content.map((function(t,i){var o=e.data.content[i];(void 0!=o.apResultRegisterState&&null!=o.apResultRegisterState&&""!=o.apResultRegisterState||0==o.apResultRegisterState)&&(o.apResultRegisterState=a.SearchItemDatas.apResultRegisterState[o.apResultRegisterState][1]),o.sourceId&&(t.sourceId=o.sources.name,e.data.content[i].appointChargePersonInfo&&(t.appointChargePerson=e.data.content[i].appointChargePersonInfo.name))})),t.getTableData=e.data,t.tableloading=!1}))},fetchData:function(){var e=this;this.pageLoading=!0,Object(f["Fc"])().then((function(t){e.getSearchFieldsTimeData=t.data,e.getSearchFieldsTimeLoaded=!0})),Object(f["Cc"])().then((function(t){e.getAttributeConditionData=t.data,e.getAttributeConditionLoaded=!0})),Object(f["Jc"])().then((function(t){e.getTableFields=t.data,e.getTableFieldsLoaded=!0})),Object(f["Ic"])(this.SearchConditionDatas).then((function(t){e.getTableData=t.data,e.getTableDataLoaded=!0,e.pageLoading=!1}))},initData:function(){this.SearchItemDatas=JSON.parse(this.SessionItem("SearchItem")),this.dailogShow=JSON.parse(JSON.stringify(this.buttonEventArr))}},created:function(){this.initData(),this.fetchData()},mounted:function(){},updated:function(){}},N=L,P=(a("b4b7"),Object(v["a"])(N,i,o,!1,null,null,null));t["default"]=P.exports},c3a6:function(e,t,a){"use strict";var i=a("28ba"),o=a.n(i);o.a}}]);